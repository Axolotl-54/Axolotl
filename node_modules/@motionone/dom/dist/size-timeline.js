var t=function(){};function e(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}"production"!==process.env.NODE_ENV&&(t=function(t,e){if(!t)throw new Error(e)});const n=(t,e,n)=>Math.min(Math.max(n,t),e),i={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},a=t=>"number"==typeof t,s=t=>Array.isArray(t)&&!a(t[0]);function r(t,e){return s(t)?t[((t,e,n)=>{const i=e-t;return((n-t)%i+i)%i+t})(0,t.length,e)]:t}const o=(t,e,n)=>-n*t+n*e+t,l=()=>{},c=t=>t,u=(t,e,n)=>e-t==0?1:(n-t)/(e-t);function h(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const a=u(0,e,i);t.push(o(n,1,a))}}function f(t){const e=[0];return h(e,t-1),e}const d=t=>"object"==typeof t&&Boolean(t.createAnimation),p=t=>"function"==typeof t,m=t=>1e3*t,y=t=>t/1e3,g=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t;function v(t,e,n,i){if(t===e&&n===i)return c;const a=e=>function(t,e,n,i,a){let s,r,o=0;do{r=e+(n-e)/2,s=g(r,i,a)-t,s>0?n=r:e=r}while(Math.abs(s)>1e-7&&++o<12);return r}(e,0,1,t,n);return t=>0===t||1===t?t:g(a(t),e,i)}const O={ease:v(.25,.1,.25,1),"ease-in":v(.42,0,1,1),"ease-in-out":v(.42,0,.58,1),"ease-out":v(0,0,.58,1)},b=/\((.*?)\)/;function w(t){if(p(t))return t;if(Array.isArray(t))return v(...t);if(O[t])return O[t];if(t.startsWith("steps")){const e=b.exec(t);if(e){const t=e[1].split(",");return((t,e="end")=>i=>{const a=(i="end"===e?Math.min(i,.999):Math.max(i,.001))*t,s="end"===e?Math.floor(a):Math.ceil(a);return n(0,1,s/t)})(parseFloat(t[0]),t[1].trim())}}return c}class S{constructor(t,e=[0,1],{easing:a,duration:l=i.duration,delay:p=i.delay,endDelay:m=i.endDelay,repeat:y=i.repeat,offset:g,direction:v="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=c,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise(((t,e)=>{this.resolve=t,this.reject=e})),a=a||i.easing,d(a)){const t=a.createAnimation(e,(()=>"0"),!0);a=t.easing,void 0!==t.keyframes&&(e=t.keyframes),void 0!==t.duration&&(l=t.duration)}this.repeat=y,this.easing=s(a)?c:w(a),this.updateDuration(l);const O=function(t,e=f(t.length),i=c){const a=t.length,s=a-e.length;return s>0&&h(e,s),s=>{let l=0;for(;l<a-2&&!(s<e[l+1]);l++);let c=n(0,1,u(e[l],e[l+1],s));return c=r(i,l)(c),o(t[l],t[l+1],c)}}(e,g,s(a)?a.map(w):c);this.tick=e=>{var n;let i=0;i=void 0!==this.pauseTime?this.pauseTime:(e-this.startTime)*this.rate,this.t=i,i/=1e3,i=Math.max(i-p,0),"finished"===this.playState&&void 0===this.pauseTime&&(i=this.totalDuration);const a=i/this.duration;let s=Math.floor(a),r=a%1;!r&&a>=1&&(r=1),1===r&&s--;const o=s%2;("reverse"===v||"alternate"===v&&o||"alternate-reverse"===v&&!o)&&(r=1-r);const l=i>=this.totalDuration?1:Math.min(r,1),c=O(this.easing(l));t(c);void 0===this.pauseTime&&("finished"===this.playState||i>=this.totalDuration+m)?(this.playState="finished",null===(n=this.resolve)||void 0===n||n.call(this,c)):"idle"!==this.playState&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const t=performance.now();this.playState="running",void 0!==this.pauseTime?this.startTime=t-this.pauseTime:this.startTime||(this.startTime=t),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var t;this.playState="idle",void 0!==this.frameRequestId&&cancelAnimationFrame(this.frameRequestId),null===(t=this.reject)||void 0===t||t.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(t){this.duration=t,this.totalDuration=t*(this.repeat+1)}get currentTime(){return this.t}set currentTime(t){void 0!==this.pauseTime||0===this.rate?this.pauseTime=t:this.startTime=performance.now()-t/this.rate}get playbackRate(){return this.rate}set playbackRate(t){this.rate=t}}function T(t,e,n){return p(t)?t(e,n):t}class A{setAnimation(t){this.animation=t,null==t||t.finished.then((()=>this.clearAnimation())).catch((()=>{}))}clearAnimation(){this.animation=this.generator=void 0}}const x=new WeakMap;function D(t){return x.has(t)||x.set(t,{transforms:[],values:new Map}),x.get(t)}const k=["","X","Y","Z"],M={x:"translateX",y:"translateY",z:"translateZ"},E={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},j={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:E,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:c},skew:E},P=new Map,R=t=>`--motion-${t}`,V=["x","y","z"];["translate","scale","rotate","skew"].forEach((t=>{k.forEach((e=>{V.push(t+e),P.set(R(t+e),j[t])}))}));const $=(t,e)=>V.indexOf(t)-V.indexOf(e),q=new Set(V),F=t=>q.has(t),I=t=>t.sort($).reduce(U,"").trim(),U=(t,e)=>`${t} ${e}(var(${R(e)}))`,W=t=>t.startsWith("--"),_=new Set;const C=(t,e)=>document.createElement("div").animate(t,e),B={cssRegisterProperty:()=>"undefined"!=typeof CSS&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{C({opacity:[1]})}catch(t){return!1}return!0},finished:()=>Boolean(C({opacity:[0,1]},{duration:.001}).finished),linearEasing:()=>{try{C({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0}},N={},z={};for(const t in B)z[t]=()=>(void 0===N[t]&&(N[t]=B[t]()),N[t]);const K=(t,e)=>p(t)?z.linearEasing()?`linear(${((t,e)=>{let n="";const i=Math.round(e/.015);for(let e=0;e<i;e++)n+=t(u(0,i-1,e))+", ";return n.substring(0,n.length-2)})(t,e)})`:i.easing:(t=>Array.isArray(t)&&a(t[0]))(t)?X(t):t,X=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`;const Y=t=>Array.isArray(t)?t:[t];function Z(t){return M[t]&&(t=M[t]),F(t)?R(t):t}const L=(t,e)=>{e=Z(e);let n=W(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!n&&0!==n){const t=P.get(e);t&&(n=t.initialValue)}return n},G=(t,e,n)=>{e=Z(e),W(e)?t.style.setProperty(e,n):t.style[e]=n};function H(t,e=!0){if(t&&"finished"!==t.playState)try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch(t){}}function J(t,e,n,r={}){const o=window.__MOTION_DEV_TOOLS_RECORD,c=!1!==r.record&&o;let u,{duration:h=i.duration,delay:f=i.delay,endDelay:y=i.endDelay,repeat:g=i.repeat,easing:v=i.easing,direction:O,offset:b,allowWebkitAcceleration:w=!1}=r;const T=D(t),x=F(e);let k=z.waapi();x&&((t,e)=>{M[e]&&(e=M[e]);const{transforms:n}=D(t);var i,a;a=e,-1===(i=n).indexOf(a)&&i.push(a),t.style.transform=I(n)})(t,e);const E=Z(e),j=function(t,e){return t.has(e)||t.set(e,new A),t.get(e)}(T.values,E),R=P.get(E);return H(j.animation,!(d(v)&&j.generator)&&!1!==r.record),()=>{const i=()=>{var e,n;return null!==(n=null!==(e=L(t,E))&&void 0!==e?e:null==R?void 0:R.initialValue)&&void 0!==n?n:0};let T=function(t,e){for(let n=0;n<t.length;n++)null===t[n]&&(t[n]=n?t[n-1]:e());return t}(Y(n),i);if(d(v)){const t=v.createAnimation(T,i,x,E,j);v=t.easing,void 0!==t.keyframes&&(T=t.keyframes),void 0!==t.duration&&(h=t.duration)}if(W(E)&&(z.cssRegisterProperty()?function(t){if(!_.has(t)){_.add(t);try{const{syntax:e,initialValue:n}=P.has(t)?P.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:n})}catch(t){}}}(E):k=!1),x&&!z.linearEasing()&&(p(v)||s(v)&&v.some(p))&&(k=!1),k){R&&(T=T.map((t=>a(t)?R.toDefaultUnit(t):t))),1!==T.length||z.partialKeyframes()&&!c||T.unshift(i());const e={delay:m(f),duration:m(h),endDelay:m(y),easing:s(v)?void 0:K(v,h),direction:O,iterations:g+1,fill:"both"};u=t.animate({[E]:T,offset:b,easing:s(v)?v.map((t=>K(t,h))):void 0},e),u.finished||(u.finished=new Promise(((t,e)=>{u.onfinish=t,u.oncancel=e})));const n=T[T.length-1];u.finished.then((()=>{G(t,E,n),u.cancel()})).catch(l),w||(u.playbackRate=1.000001)}else if(x){T=T.map((t=>"string"==typeof t?parseFloat(t):t)),1===T.length&&T.unshift(parseFloat(i()));u=new S((e=>{R&&(e=R.toDefaultUnit(e)),G(t,E,e)}),T,Object.assign(Object.assign({},r),{duration:h,easing:v}))}else{const e=T[T.length-1];G(t,E,R&&a(e)?R.toDefaultUnit(e):e)}return c&&o(t,e,T,{duration:h,delay:f,easing:v,repeat:g,offset:b},"motion-one"),j.setAnimation(u),u}}const Q=t=>t(),tt={get:(t,e)=>{const n=t.animations[0];switch(e){case"duration":return t.duration;case"currentTime":return y((null==n?void 0:n[e])||0);case"playbackRate":case"playState":return null==n?void 0:n[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(et)).catch(l)),t.finished;case"stop":return()=>{t.animations.forEach((t=>H(t)))};case"forEachNative":return e=>{t.animations.forEach((n=>e(n,t)))};default:return void 0===(null==n?void 0:n[e])?void 0:()=>t.animations.forEach((t=>t[e]()))}},set:(t,e,n)=>{switch(e){case"currentTime":n=m(n);case"currentTime":case"playbackRate":for(let i=0;i<t.animations.length;i++)t.animations[i][e]=n;return!0}return!1}},et=t=>t.finished,nt=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function it(t,e){var n;return"string"==typeof t?e?(null!==(n=e[t])&&void 0!==n||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}function at(t,e,n,i){var s;return a(e)?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):"<"===e?n:null!==(s=i.get(e))&&void 0!==s?s:t}function st(t,n,i,a,s,l){!function(t,n,i){for(let a=0;a<t.length;a++){const s=t[a];s.at>n&&s.at<i&&(e(t,s),a--)}}(t,s,l);for(let e=0;e<n.length;e++)t.push({value:n[e],at:o(s,l,a[e]),easing:r(i,e)})}function rt(t,e){return t.at===e.at?null===t.value?1:-1:t.at-e.at}function ot(t,e={}){var n;const a=lt(t,e),s=a.map((t=>J(...t))).filter(Boolean);return((t,e,n=i.duration)=>new Proxy({animations:t.map(Q).filter(Boolean),duration:n,options:e},tt))(s,e,null===(n=a[0])||void 0===n?void 0:n[3].duration)}function lt(e,n={}){var{defaultOptions:a={}}=n,s=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]])}return n}(n,["defaultOptions"]);const r=[],o=new Map,l={},c=new Map;let p=0,m=0,y=0;for(let n=0;n<e.length;n++){const s=e[n];if("string"==typeof s){c.set(s,m);continue}if(!Array.isArray(s)){c.set(s.name,at(m,s.at,p,c));continue}const[r,u,g={}]=s;void 0!==g.at&&(m=at(m,g.at,p,c));let v=0;const O=it(r,l),b=O.length;for(let e=0;e<b;e++){const n=ct(O[e],o);for(const s in u){const r=ut(s,n);let o=Y(u[s]);const l=nt(g,s);let{duration:c=a.duration||i.duration,easing:p=a.easing||i.easing}=l;if(d(p)){const e=F(s);t(2===o.length||!e,"spring must be provided 2 keyframes within timeline");const n=p.createAnimation(o,(()=>"0"),e);p=n.easing,void 0!==n.keyframes&&(o=n.keyframes),void 0!==n.duration&&(c=n.duration)}const O=T(g.delay,e,b)||0,w=m+O,S=w+c;let{offset:A=f(o.length)}=l;1===A.length&&0===A[0]&&(A[1]=1);const x=length-o.length;x>0&&h(A,x),1===o.length&&o.unshift(null),st(r,o,p,A,w,S),v=Math.max(O+c,v),y=Math.max(S,y)}}p=m,m+=v}return o.forEach(((t,e)=>{for(const n in t){const o=t[n];o.sort(rt);const l=[],c=[],h=[];for(let t=0;t<o.length;t++){const{at:e,value:n,easing:a}=o[t];l.push(n),c.push(u(0,y,e)),h.push(a||i.easing)}0!==c[0]&&(c.unshift(0),l.unshift(l[0]),h.unshift("linear")),1!==c[c.length-1]&&(c.push(1),l.push(null)),r.push([e,n,l,Object.assign(Object.assign(Object.assign({},a),{duration:y,easing:h,offset:c}),s)])}})),r}function ct(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function ut(t,e){return e[t]||(e[t]=[]),e[t]}export{lt as createAnimationsFromTimeline,ot as timeline};
